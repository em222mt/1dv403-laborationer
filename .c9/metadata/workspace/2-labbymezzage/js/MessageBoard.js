{"changed":true,"filter":false,"title":"MessageBoard.js","tooltip":"/2-labbymezzage/js/MessageBoard.js","value":"'use strict';\n\nvar MessageBoard = {\n    // Variabel för meddelanden\n    messages: [],\n    \n    init: function(){\n        // Anropar count och sätter räknaren till 0.\n        MessageBoard.countMessages();\n        // Skapar ett meddelande då Spara-knappen klickas.\n        var submit = document.getElementById(\"send\");\n        submit.onclick = MessageBoard.createMessage;\n        // Förklarar sidan funktion för användaren.\n        var textBox = document.getElementById(\"formtext\");\n        textBox.placeholder = \"Skriv in det meddelande som du vill spara. Enter sparar - shift+enter byter rad.\";\n        // Sätter en blinkande markör i textarean.\n        textBox.focus();\n        // Skapar ett meddelande då entertangenten trycks.\n        textBox.onkeypress = function(e){\n\t\tif(!e){ e=window.event; }\n\t\t    if(e.keyCode == 13 && !e.shiftKey){\n\t\t        e.preventDefault();\n\t\t        MessageBoard.createMessage();\n\t\t    }\n        };\n    },\n    // Skapar ett meddelandeobjekt om inte rutan är tom.\n    createMessage: function(){\n        if (document.getElementById(\"formtext\").value === \"\") {\n            return false;\n        }\n        var input = document.getElementById(\"formtext\");\n        MessageBoard.messages.push( new Message(input.value, new Date()) );\n        MessageBoard.renderMessages();\n    },\n    \n    // Rendera alla meddelanden\n    renderMessages: function(){\n        //Tar bort alla meddelanden och skriver ut dom igen.\n        document.getElementById(\"messagearea\").innerHTML = \"\";\n        for (var i = 0; i < MessageBoard.messages.length; ++i){\n        MessageBoard.renderMessage(i);\n        }\n        //Tömmer meddelanderutan och sätter en blinkande markör.\n        document.form.formtext.value = \"\";\n        document.form.formtext.focus();\n    },\n    // Skriver ut ett meddelande och skapar en struktur för style.css.\n    renderMessage: function(messageID){\n        \n        var input = document.createElement(\"p\");\n        input.className = \"input\";\n        input.innerHTML = MessageBoard.messages[messageID].getHTMLText();\n        \n        var textContainer = document.createElement(\"div\");\n        textContainer.className = (\"textContainer\");\n        textContainer.appendChild(input);\n        \n        var time = document.createElement(\"p\");\n        time.className = \"time\";\n        time.innerHTML = MessageBoard.messages[messageID].getDateText();\n\t\t\n\t\tvar imageClock = document.createElement(\"a\");\n\t\timageClock.setAttribute(\"href\", \"#\");\n\t\timageClock.innerHTML = '<img src=\"pics/clock.png\" title=\"Se när meddelandet skapades.\" alt=\"Clock\" />';\n\n\t\tvar imageRemove = document.createElement(\"a\");\n\t\timageRemove.setAttribute(\"href\", \"#\");\n\t\timageRemove.innerHTML = '<img src=\"pics/delete.png\" title=\"Ta bort det här meddelandet.\" alt=\"Delete\" />';\n\t\t\n        var detailsContainer = document.createElement(\"div\");\n        detailsContainer.className = \"detailsContainer\";\n\t\tdetailsContainer.appendChild(imageClock);\n\t\tdetailsContainer.appendChild(imageRemove);\n\t\tdetailsContainer.appendChild(time);\n\t\t\n        var messageContainer = document.createElement(\"div\");\n        messageContainer.className = \"messageContainer\";\n        messageContainer.appendChild(textContainer);\n        messageContainer.appendChild(detailsContainer);\n\n\t\tvar container = document.getElementById(\"messagearea\");\n\t\tcontainer.appendChild(messageContainer);\n\t\t\n\t\tMessageBoard.countMessages();\n\t\t\n\t\t// Gör bilderna klickbara.\n\t\timageRemove.onclick = function(){\n\t\t    if (window.confirm(\"Vill du ta bort detta meddelande?\")){\n\t\t    MessageBoard.removeMessage(messageID);\t\t        \n\t\t    }\n\t\t};\n\t\t\n\t\timageClock.onclick = function(){\n\t\t  MessageBoard.getTimestamp(messageID);  \n\t\t};\n    },\n    // Raderar ett meddelande och sätter räknaren rätt.\n    removeMessage: function(messageID){\n        MessageBoard.messages.splice(messageID, 1);\n\n        MessageBoard.countMessages();\n        \n        MessageBoard.renderMessages();\n    },\n    // Hämtar den exakt tiden då meddelandet skapades och visar det för användaren i en alertruta.\n    getTimestamp: function(messageID){\n        alert(MessageBoard.messages[messageID].getTimeDetails());\n    },\n    \n    // Sätter räknare för antalet meddelanden.\n    countMessages: function(){\n        var counter = document.getElementById(\"counter\");\n        counter.innerHTML = \"Antal meddelanden: \" + MessageBoard.messages.length;\n    }\n    \n};\n// Kör scripten då sidan är färdigladdad.\nwindow.onload = MessageBoard.init;","undoManager":{"mark":-1,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":96,"column":5},"end":{"row":96,"column":6},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":96,"column":5},"end":{"row":96,"column":6},"action":"insert","lines":[","]}]}]]},"ace":{"folds":[],"scrolltop":179.09089999999992,"scrollleft":0,"selection":{"start":{"row":100,"column":0},"end":{"row":100,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":12,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1416168268000}