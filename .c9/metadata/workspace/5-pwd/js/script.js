{"changed":true,"filter":false,"title":"script.js","tooltip":"/5-pwd/js/script.js","value":"\"use strict\";\n\nvar Project = {\n    //Array för bilder\n    pics: [],\n    //Sparade DOM-anrop\n    open: false,\n    desktop: 0,\n    gallery: 0,\n    topBar: 0,\n    topBarIcon: 0,\n    topBarIconLink: 0,\n    topBarText: 0,\n    bottomBar: 0,\n    closeImage: 0,\n    closeIcon: 0,\n    box: 0,\n    thumbNail: 0,\n    thumbLink: 0,\n    galleryIcon: document.getElementById(\"galleryicon\"),\n    \n    init: function(){\n\n        Project.galleryIcon.onclick = function(){\n\n            if (Project.open === false) {\n                Project.open = true;\n                console.log(Project.open);\n                Project.createGallery();\n                Project.getImages();\n            }\n            else{\n                console.log(\"false\");\n                return false;\n            }\n            var desktop = document.getElementById(\"desktop\");                    \n            Project.closeIcon.onclick = function(){\n                Project.removeNodes(desktop);\n            };  \n        };\n    },\n    //Skapar bildgalleriet\n    createGallery: function(){\n        Project.body = document.getElementById(\"desktop\");\n        \n        Project.gallery = document.createElement(\"div\");\n        Project.gallery.setAttribute(\"class\", \"gallery\");\n        Project.gallery.setAttribute(\"id\", \"gallery\");\n        \n        Project.topBar = document.createElement(\"div\");\n        Project.topBar.setAttribute(\"class\", \"topbar\");\n        Project.topBar.setAttribute(\"id\", \"topbar\");\n        Project.topBarIcon = document.createElement(\"img\");\n        Project.topBarIcon.setAttribute(\"src\", \"pics/Imageviewer.png\");\n        Project.topBarIcon.setAttribute(\"id\", \"topbaricon\");\n        Project.topBarIconLink = document.createElement(\"a\");\n        Project.topBarIconLink.setAttribute(\"href\", \"#\");\n        Project.topBarText = document.createElement(\"p\");\n        Project.topBarText.setAttribute(\"id\", \"topbartext\");\n        Project.topBarText.innerHTML = \"ImageViewer\";\n        Project.topBarIconLink.appendChild(Project.topBarIcon);\n        Project.topBar.appendChild(Project.topBarIconLink);\n        Project.topBar.appendChild(Project.topBarText);\n        \n        Project.closeImage = document.createElement(\"img\");\n        Project.closeImage.setAttribute(\"src\", \"pics/close.png\");\n        Project.closeImage.setAttribute(\"id\", \"closeimage\");\n        Project.closeImage.setAttribute(\"alt\", \"Close window.\");\n        \n        Project.closeIcon = document.createElement(\"a\");\n        Project.closeIcon.setAttribute(\"class\", \"closeicon\");\n        Project.closeIcon.setAttribute(\"href\", \"#\");\n        Project.closeIcon.appendChild(Project.closeImage);\n        \n        Project.topBar.appendChild(Project.closeIcon);\n        \n        Project.bottomBar = document.createElement(\"div\");\n        Project.bottomBar.setAttribute(\"class\", \"bottombar\");\n        Project.bottomBar.setAttribute(\"id\", \"bottombar\");\n\n        Project.body.appendChild(Project.topBar);\n        Project.body.appendChild(Project.gallery);\n        Project.body.appendChild(Project.bottomBar);\n    },\n    //Hämtar bilder och lägger dom i picssarrayen\n    getImages: function(){\n        //Skapar laddningsbar\n        Project.createLoadingBar();\n        //Gör ett ett AJAX-anrop\n        var xhr = new XMLHttpRequest();\n        xhr.onreadystatechange = function(){\n            if (xhr.readyState === 4) {\n                if (xhr.status == 200) {\n                    Project.pics = JSON.parse(xhr.responseText);\n                    // console.log(xhr.responseText);\n                    \n                    //Skapar struktur för thumbnails\n                    Project.pics.forEach(function(pic){\n                        Project.box = document.createElement(\"div\");\n                        Project.box.setAttribute(\"class\", \"box\");\n                        \n                        Project.thumbNail = document.createElement(\"img\");\n                        Project.thumbNail.setAttribute(\"src\", pic.thumbURL);\n                        Project.thumbNail.setAttribute(\"class\", \"thumb\");\n                        Project.thumbNail.style.maxWidth = pic.thumbWidth;\n                        Project.thumbNail.style.maxHeight = pic.thumbHeight;\n                        \n                        Project.thumbLink = document.createElement(\"a\");\n                        Project.thumbLink.setAttribute(\"href\", \"#\");\n                        Project.thumbLink.setAttribute(\"class\", \"thumblink\");\n                        \n                        Project.thumbLink.appendChild(Project.thumbNail);\n                        Project.box.appendChild(Project.thumbLink);\n                        \n                        Project.gallery.appendChild(Project.box);\n                        //Sätter bakgrundsbilden till den klickade thumben.\n                        Project.thumbLink.onclick = function(){\n                            var link = pic.URL;\n                            var background = document.getElementById(\"background\");\n                            background.style.backgroundImage = \"url(\" + link + \")\";\n                        };\n                    });\n                    //Tar bort laddningsbar\n                    Project.removeNodes(Project.bottomBar);\n                }\n                //Ger en alertruta om AJAX-anropet misslyckas.\n                else{\n                    alert(\"Läsfel status: \" + xhr.status);\n                }\n            }\n        };\n        xhr.open(\"GET\", \"http://homepage.lnu.se/staff/tstjo/labbyServer/imgviewer/\", true);\n        xhr.send(null);\n    },\n    //Skapar en laddningsbar\n    createLoadingBar: function(){\n            \n        var loadingGif = document.createElement(\"img\");\n        loadingGif.setAttribute(\"src\", \"pics/loader.gif\");\n        loadingGif.setAttribute(\"id\", \"loadinggif\");\n        \n        var loadingText = document.createElement(\"p\");\n        loadingText.setAttribute(\"id\", \"loadingtext\");\n        loadingText.innerHTML = \"Laddar bilder...\";\n        \n        Project.bottomBar.appendChild(loadingText);\n        Project.bottomBar.appendChild(loadingGif);\n    },\n    //Tömmer noder\n    removeNodes: function(param){\n        while (param.firstChild) {\n            param.removeChild(param.firstChild);\n            Project.open = false;\n        }\n    },\n};\nwindow.onload = Project.init;","undoManager":{"mark":93,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":26,"column":16},"end":{"row":26,"column":37},"action":"remove","lines":["Project.gallery === 0"]},{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":18},"end":{"row":26,"column":19},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":16},"end":{"row":26,"column":19},"action":"remove","lines":["Pro"]},{"start":{"row":26,"column":16},"end":{"row":26,"column":23},"action":"insert","lines":["Project"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":23},"end":{"row":26,"column":24},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":24},"end":{"row":26,"column":25},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":25},"end":{"row":26,"column":26},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":26},"end":{"row":26,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":27},"end":{"row":26,"column":28},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":28},"end":{"row":26,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":29},"end":{"row":26,"column":30},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":30},"end":{"row":26,"column":31},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":32},"end":{"row":26,"column":33},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":33},"end":{"row":26,"column":34},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":34},"end":{"row":26,"column":35},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":35},"end":{"row":26,"column":36},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":36},"end":{"row":26,"column":37},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":31},"end":{"row":26,"column":32},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":16},"end":{"row":27,"column":36},"action":"remove","lines":["console.log(\"true\");"]},{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":24},"end":{"row":27,"column":25},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":25},"end":{"row":27,"column":26},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":26},"end":{"row":27,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":27},"end":{"row":27,"column":28},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":29},"end":{"row":27,"column":30},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":30},"end":{"row":27,"column":31},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":32},"end":{"row":27,"column":33},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":33},"end":{"row":27,"column":34},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":34},"end":{"row":27,"column":35},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":35},"end":{"row":27,"column":36},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":153,"column":48},"end":{"row":154,"column":0},"action":"insert","lines":["",""]},{"start":{"row":154,"column":0},"end":{"row":154,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":12},"end":{"row":154,"column":34},"action":"insert","lines":["Project.open === false"]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":26},"end":{"row":154,"column":27},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":26},"end":{"row":154,"column":27},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":154,"column":32},"end":{"row":154,"column":33},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":27,"column":36},"end":{"row":28,"column":0},"action":"insert","lines":["",""]},{"start":{"row":28,"column":0},"end":{"row":28,"column":16},"action":"insert","lines":["                "]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":16},"end":{"row":28,"column":17},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":17},"end":{"row":28,"column":18},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":18},"end":{"row":28,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":19},"end":{"row":28,"column":20},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":20},"end":{"row":28,"column":21},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":24},"end":{"row":28,"column":25},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":25},"end":{"row":28,"column":26},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":27},"end":{"row":28,"column":29},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":28},"end":{"row":28,"column":29},"action":"insert","lines":["P"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":29},"end":{"row":28,"column":30},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":32},"end":{"row":28,"column":33},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":34},"end":{"row":28,"column":35},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":35},"end":{"row":28,"column":36},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":36},"end":{"row":28,"column":37},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":37},"end":{"row":28,"column":38},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":38},"end":{"row":28,"column":39},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":39},"end":{"row":28,"column":40},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":0},"end":{"row":34,"column":20},"action":"remove","lines":["        ","                Project.closeIcon.onclick = function(){","                    Project.removeNodes(desktop);","                };  "]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":36},"end":{"row":31,"column":14},"action":"remove","lines":["","              "]}]}],[{"group":"doc","deltas":[{"start":{"row":35,"column":13},"end":{"row":36,"column":0},"action":"insert","lines":["",""]},{"start":{"row":36,"column":0},"end":{"row":36,"column":12},"action":"insert","lines":["            "]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":12},"end":{"row":39,"column":20},"action":"insert","lines":["        ","                Project.closeIcon.onclick = function(){","                    Project.removeNodes(desktop);","                };  "]}]}],[{"group":"doc","deltas":[{"start":{"row":37,"column":0},"end":{"row":37,"column":4},"action":"remove","lines":["    "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":4},"action":"remove","lines":["    "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":24,"column":61},"action":"remove","lines":["            var desktop = document.getElementById(\"desktop\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":36,"column":0},"end":{"row":36,"column":61},"action":"insert","lines":["            var desktop = document.getElementById(\"desktop\");"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":38},"end":{"row":26,"column":39},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":39},"end":{"row":26,"column":40},"action":"insert","lines":["&"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":40},"end":{"row":26,"column":41},"action":"insert","lines":["&"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":41},"end":{"row":26,"column":42},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":42},"end":{"row":26,"column":43},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":43},"end":{"row":26,"column":44},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":44},"end":{"row":26,"column":45},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":45},"end":{"row":26,"column":46},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":46},"end":{"row":26,"column":47},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":47},"end":{"row":26,"column":48},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":48},"end":{"row":26,"column":49},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":49},"end":{"row":26,"column":50},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":50},"end":{"row":26,"column":51},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":50},"end":{"row":26,"column":51},"action":"remove","lines":["f"]},{"start":{"row":26,"column":50},"end":{"row":26,"column":60},"action":"insert","lines":["firstChild"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":42},"end":{"row":26,"column":43},"action":"insert","lines":["!"]}]}],[{"group":"doc","deltas":[{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":42},"end":{"row":25,"column":61},"action":"remove","lines":["!desktop.firstChild"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":41},"end":{"row":25,"column":42},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":40},"end":{"row":25,"column":41},"action":"remove","lines":["&"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":39},"end":{"row":25,"column":40},"action":"remove","lines":["&"]}]}],[{"group":"doc","deltas":[{"start":{"row":25,"column":38},"end":{"row":25,"column":39},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":16},"end":{"row":40,"column":0},"action":"remove","lines":["","",""]}]}]]},"ace":{"folds":[],"scrolltop":196.3636,"scrollleft":0,"selection":{"start":{"row":40,"column":6},"end":{"row":40,"column":6},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420981454100}